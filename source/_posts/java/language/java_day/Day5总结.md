---
title: java -- day5 内存分析
date: 2015-12-28 21:18:12
tags: [java,day]
categories: java基础

---

# Day5
## 内存分析
>通过分析运行在jvm中的java字节码文件，分析变量、方法、常量所在的内存空间（jvm所开辟的内存空间中）洞悉本质。

内存分为四块：栈、堆、方法区、数据区

栈：

1. 存放的元素：局部变量（在代码块、方法体中定义的变量，方法的声明部分涉及的形参）
2. 特点：程序执行完该局部变量所在的代码块或者是方法体后，就会自动释放该局部变量所占据的内存空间。

堆：

1. 存放的元素：new出来的对象
2. 特点：程序运行完该对象所在的代码块之后，对象所占据的内存空间并不会马上释放。释放的时机由底层的垃圾回收器（就是低优先级运行的守护线程）来决定；对内存空间的对象都是有首地址，一般将该首地址赋值给栈内存中的一个引用变量，通过该引用类型的变量来操作堆内存空间中的对象。

方法区

1. 存放的元素：方法体本省（方法编译之后的字节码文件）
2. 特点：当对象调用某个方法时，就会从方法区中加载该方法进入栈内存，执行完毕后，栈内存中的方法会销毁。当是，方法区中的方法会一直驻留，不会销毁。直到整个系统执行完毕，程序终止了，才会销毁。

数据区

1. 存放的元素：静态的全局变量和静态的全局常量；字符串的字面值。

![](http://i.imgur.com/7mAswIn.png)
## java语言特性
1. 封装性
2. 继承性
3. 多态

封装性：从广义上讲：类和方法的定义本身就是封装性的体现。一般说的“封装性”就是指狭义上的：在设计类时，将所有的类属性设计为私有的，并对各个私有属性设计相应的getter、setter访问器。本质就是属性私有化的过程。

扩展eclipse的使用：

1、工作区：项目在本地的目录。
2、所有java源代码必须书写在java工程中（项目中）。
   src:源包，源程序所在的包，不会作为类的包名的一部分。

    常用的快捷键                含义
-----------------------------------------------
    alt+shift+a               列编辑切换
    alt+shift+s               调出菜单选项（setter/getter...）
    ctrl+shift+f              格式化代码
    // TODO                   在此处书写代码（一般代码行数较多的场合，用于标记代码）
    ctrl+f11                  运行程序
    syso+alt+/                    自动产生System.out.println()
    ctrl+7                    对选中的代码添加或者取消当行注释
    ctrl+shift+/              对选中的代码添加多行注释
    ctrl+shift+\              对选中的代码取消多行注释
    alt+上下光标键             将选中的代码移动到指定的地方
    ctrl+alt+上下光标键        复制选中的代码
    ctrl+鼠标左键点击选中的代码  查看jdk底层或者是自己书写的代码
    ctrl+shift+t               调出一个命令行窗口，查询指定的类
    选中类+F4                   查看类的层次结构图
    ctrl+1                    弹出修改方案选择框
    ctrl+shift+o              自动导入或者移除import语句

文档注释模版：

/**
 * Description： xxxx<br/>
 * Copyright (c) , ${year}, Jansonxu <br/>
 * This program is protected by copyright laws. <br/>
 * Program Name:${file_name} <br/>
 * Date: ${date}
 * 
 * @author XXX
 * @version : 1.0
 */

## this关键字
>this:指的是当前对象的一个引用。
this的使用

1. 通过this.属性方式，访问类中的属性
2. 通过this。方法（实参列表）访问本类中其余的方法，此处的this可以省略
3. this（实参列表），用在类的构造器中的第一条语句，表示调用别的构造方法。但不能使用在普通方法中。因为this指的是当前对象的引用，方法时被对象调用的。
## 方法参数的传递
### 参数类型：基本数据类型
### 参数类型：引用数据类型

根据传递参数类型不同，分为：

**传值**：当参数的类型是基本数据类型，传递是值。

说明：若一个方法没有返回值类型，传递过来的值在方法体中发生了变更，值是传不回来的。

特点：方法体中，存储在栈内存中的局部变量的作用域范围仅仅限于其所在的代码块，存储在栈内存空间中，方法执行完毕之后，就会自动销毁。所以，值是传不回来的。

**传址**：当传递参数的类型是引用类型，传递是地址。（地址是存储在堆中对象的首地址值）

说明：若一个方法没有返回值类型，传递过来的地址，对堆内存中的对象的属性值若进行了改变，那么，改变后的值是可以传递回来的。

特点：方法体中，引用类型的变量也是存储在栈中，在方法执行完毕（在该变量销毁）之前，做了一件事情“修改了堆中对象的属性值”，所以，虽然销毁了，但是返回调用点后，对象的属性值是变动之后的。
## static 关键字

1. 修饰全局的属性

	静态变量
	语法：访问权限修饰符 static  类型  属性名；

	特点：a）静态属性属于类，通过“类名.静态属性名”的方式来调用。
      b）静态属性的生命诞生于实例之前（静态属性随着类的字节码文件加载到jvm中，且只会加载一次）。
      c）所有对象共享静态属性。

2. 修饰方法
	静态方法
	语法：访问权限修饰符 static 返回值类型 方法名(形参列表){
            //方法体
      }

	特点：a）静态方法属于类，通过“类.静态方法(实参)”的方式调用。
      b）静态方法也优先于实例被加载到jvm中。
      c）静态方法只能访问静态属性和别的静态方法，不能访问普通属性和普通方法。

3. 修饰代码块
	静态代码块
	语法：static{
        //块体
     }

	特点：a）静态代码块一般是用来给静态属性赋予初始值。
      b）静态代码块属于类的，随着类对应的字节码文件加载到jvm中，就会自动执行。
      c）拓展：与之对应的是普通代码块，普通代码块属于对象的，执行时机：在实例构建期间，普通代码块就会执行。

**总结**：在真实项目中，static关键字使用在工具类的工具方法中，如：jdk中的工具类Math,所有的方法都是静态的。**工具类**：在一个项目中，有些共同的逻辑，需要抽取出来，设计为一个类，供项目组中别的程序员调用。（高级程序员）普通类：从语法的角度而言，可以使用。但是，因为使用static修饰的属性、方法、代码块生命周期很长，只要项目未执行完毕，会一直驻留在内存中，消耗大量的空间。
##包
###创建包
###导入包
###创建包的命名规范

