---
title: App版本升级
date: 2016-04-03 13:18:12
tags: [App, 版本]
category: android

---

# App版本升级

## 渠道升级--渠道号

每个渠道包作唯一标识：

1001001

- 首位标识：1 安卓，2 ios
- 2-4位代表：推广渠道
- 最后3位：代表各渠道版本的自推广版本


## 版本名
- 正式版
- 预览版
- 测试版


<!--more-->

>建议在`SplashActivity`中做版本名标识

例如：正式版 V1.0.0

- 首位数字表示大版本，有架构调整、ui更新或者重大功能上线，用户感知明显的版本
- 第二位表示较大版本，有较大的模块功能上线
- 最后一位指bugfix和小优化版本


## App升级方式

### 启动升级
用户进入APP主界面，APP向服务器检测新版，如有则弹出升级提示框，有【稍后再说】、【不再提示】、【立即升级】选项，勾选【不再提示】则不再提示该版的更新，避免骚扰用户，点击【立即升级】，安卓端直接下载新包，苹果端则跳转到app store。

### 推送升级
服务器主动向APP发送推送升级消息或APP向服务器检测到新版，在手机通知栏显示升级推送消息，点击消息打开app并弹出升级提示框。

### 检测升级

提醒用户有升级的版本，提供用户另一个升级的机会。这个操作一般放在设置页或关于页。

### 强制升级

一定要预留强制升级功能，以防旧版存在严重漏洞，强制用户升级版本，升级提示框仅有【立即升级】操作，只有升级后才能进入应用。

## App下载包方式

### WiFi条件下自动下载安装包

安卓端用户打开app看到升级提示框时，75%+直接点击【稍后再说】。要升级版本多烦的事情啊，要下载（最耗时间）、退出应用、安装… 360这个细节做的就不错：wifi条件下，当你选择【稍后再说】时默默地帮你把安卓包下了，下次升级弹层提醒你直接安装。

### 增量更新

有些开源库支持打增量更新包，用户不需下载全包，节省时间，也是一种较好的做法，据笔者观测，使用的APP并不多，可能是开发成本高吧。

## App升级注意点

1. 安卓端-新包升级后，用户的历史账号、配置等数据不能丢失；
2. 安卓端-新版要向下兼容，防止用户装回旧版后报错崩溃，如新版把存储的数据结构改了，旧版读取失败而崩溃；
3. 安卓端-升级后，删除安装包，减少占用存储空间
4. 服务器定制好升级策略，批量分类更新，以防全量用户拥入，把服务器撑爆
5. 更新特性描述要吸引人，手机内存、储存寸土寸金的年代，每更新一个版本意味着占用运行内存、存储空间变大，导致手机卡，所以更新特性描述一定要吸引人，让用户有动力更新



参考：
- [http://www.pm263.com/628](http://www.pm263.com/628)
- [http://www.jianshu.com/p/058800a511de](http://www.jianshu.com/p/058800a511de)
