---
title: 网络协议--http
date: 2016-05-15 12:18:12
tags: 网络协议
category: android

---

# 网络协议 -- http

超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。

## 特点
1. 支持客户/服务器模式。

2. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

3. 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type（Content-Type是HTTP包中用来表示内容类型的标识）加以标记。

4. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

5. 无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

## 两种回话方式

1. 建立连接->请求->响应->断开连接
2. 在一个TCP连接中可以传送多个HTTP请求和响应

不需要等待上次HTTP响应完毕，可以多个HTTP请求同时进行。

<!--more-->

## 请求消息种类
1. GET：请求读取由URL所标志的信息。
2. POST：给服务器添加信息（如注释）。
3. PUT：在给定的URL下存储一个文档。
4. DELETE：删除给定的URL所标志的资源。

### GET POST 区别
1. Get是从服务器上获取数据，Post是向服务器传送数据。
2. Get是把参数数据队列加到提交表单的Action属性所指向的URL中，值和表单内各个字段一一对应，在URL中可以看到。
3. Get传送的数据量小，不能大于2KB；Post传送的数据量较大，一般被默认为不受限制。
4. GET请求用于信息获取，它应该是安全和幂等的，即不会影响服务端的资源状态；对同一URL的多个请求应该返回同样的结果。

### GET
GET使用URL传递参数

	GET /List.aspx?Catagoryid=5&Cityid=23 HTTP/1.1

### POST
POST使用实体内容传递参数

	POST /List.aspx HTTP/1.1

	Content-Type:application/x-www-form-urlencoded

	Content-Length:22

	Catagoryid=5&Cityid=23

在POST消息头中要设置Content-Type的值为application/x-www-form-urlencoded，以及使用Content-Length 以标识实体内容的长度。

当Content-Length长度比实体内容长度短时，则会忽略多出部分的实体内容。当Content-Length少于实体长度时，则会继续等待。

## 请求消息结构
请求行

若干消息头(可选)

(CRLF)

实体内容(可选)

GET无实体内容

## 响应消息结构

状态行

若干消息头(可选)

(CRLF)

实体内容(可选)

## 常见的状态码
- 200：客户端请求成功
- 400：客户端请求有语法错误，不能被服务器理解
- 403：服务器收到请求，但是拒绝提供服务
- 401：表示客户机访问的是一个受口令和密码保护的页面，并且在WWW-Authenticate响应头提示客户机应重新发出一个带有Authorization头的请求信息。
- 404：请求的资源不存在

## 一个举例

　　在浏览器中输入 www.baidu.com  后执行的全部过程

　　现在假设如果我们在客户端（客户端）浏览器中输入http://www.baidu.com,而baidu.com为要访问的服务器（服务器），下面详细分析客户端为了访问服务器而执行的一系列关于协议的操作：

1. 客户端浏览器通过DNS解析到www.baidu.com的IP地址220.181.27.48，通过这个IP地址找到客户端到服务器的路径。客户端浏览器发起一个HTTP会话到220.161.27.48，然后通过TCP进行封装数据包，输入到网络层。

2. 在客户端的传输层，把HTTP会话请求分成报文段，添加源和目的端口，如服务器使用80端口监听客户端的请求，客户端由系统随机选择一个端口如5000，与服务器进行交换，服务器把相应的请求返回给客户端的5000端口。然后使用IP层的IP地址查找目的端。

3. 客户端的网络层不用关系应用层或者传输层的东西，主要做的是通过查找路由表确定如何到达服务器，期间可能经过多个路由器，这些都是由路由器来完成的工作，不作过多的描述，无非就是通过查找路由表决定通过那个路径到达服务器。

4. 客户端的链路层，包通过链路层发送到路由器，通过邻居协议查找给定IP地址的MAC地址，然后发送ARP请求查找目的地址，如果得到回应后就可以使用ARP的请求应答交换的IP数据包现在就可以传输了，然后发送IP数据包到达服务器的地址。



参考：[http://blog.csdn.net/msonchina/article/details/1472912](http://blog.csdn.net/msonchina/article/details/1472912)
