---
title: 极光推送
date: 2016-04-18 12:18:12
tags: 极光推送
category: android

---


# 极光推送

## 推送原理
- 极光服务器
- 公司服务器
- 客户端

**流程：**

1. 注册：客户端连接--->极光服务器(一般只需注册一次)
2. 注册OK:极光服务器返回 regID --> 客户端
3. 用户登入：客户端附带 regID--->公司服务器
4. 登入OK：公司服务器 绑定推送 --> 客户端
5. 服务器推送消息：公司服务器 msg，regID -->极光服务器(极光服务器保存消息如果手机开启了就推送，客户端没有开启就需要保留推送消息一段时间)

## 推送系统结构

1. Service 后台网络与广播
2. BroadcastReceiver 接收广播
3. Notification 通知
4. Activity显示通知


<!--more-->

## 使用步骤
### 0 账号注册

### 1 下载sample

### 2 整合SDK

1. 复制`JPushExample(442136)\libs`下的`jpush-android-2.1.3.jar`文件夹到工程的`lib`文件夹下
2. 在工程`main`下创建文件夹`jniLibs`复制`JPushExample(442136)\libs`下除jar文件以外的所有文件到该文件下
3. 复制`src`文件夹下内容，(报错，同步)
3. 复制`res`文件夹下的内容，注意不要覆盖工程源文件
4. 清单文件整合

### 3 消息类型
1. 普通通知
2. 自定义消息
3. 富媒体

## 极光推送分析

### ExampleApplication

    @Override
    public void onCreate() {
    	 Log.d(TAG, "[ExampleApplication] onCreate");
         super.onCreate();

        if (BuildConfig.DEBUG) {
            JPushInterface.setDebugMode(true); 	// 设置开启日志,发布时请关闭日志
        }
         JPushInterface.init(this);     		// 初始化 JPush
    }

- 软件的发布版本需要去除：`JPushInterface.setDebugMode(true);`
- 初始化`JPushInterface.init(this);`：加载清单文件的配置，并进行客户端的注册

### MyReceiver
>需要使用的

	/**
	 * 自定义接收器
	 * 
	 * 如果不定义这个 Receiver，则：
	 * 1) 默认用户会打开主界面
	 * 2) 接收不到自定义消息
	 */
	public class MyReceiver extends BroadcastReceiver {

作用：接收广播信息，

### JPushInterface类
>需要使用的


### 清单文件整合




